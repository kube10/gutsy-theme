{{ 'section-details-product.css' | asset_url | stylesheet_tag }}
{% assign type = "" %}
{% for tag in product.tags %}
  {% case tag %}
    {% when "puppy" %}
    {% assign type = "puppy" %}
    {% when "adult-s" %}
    {% assign type = "adult-s" %}
    {% when "adult-l" %}
    {% assign type = "adult-l" %}
  {% endcase %}
  {%- if type == "" -%}
    {%- assign type = "puppy" -%}
  {%- endif -%}
  {%- if tag == "kibble" -%}
    {%- assign kibble = true -%}
  {%- endif -%}
  {%- if tag == "sample-box" -%}
    {% assign sampleBox = true %}
  {%- endif -%}
{% endfor %}

<section class="product-details-section-inner {{type}}">
  <div class="product-details-grid">
    <div class="product-details-img">
        <img class="product-details-img-tag" src="{{ product | image_url: width: 500 }}" alt="">
    </div>
    <div class="product-details-content {{type}}">
      <div data-scroll class="product-details-content-inner">
        <div class="product-details-text-content">
          <h1>{{ product.title | escape }}</h1>
          {% if product.metafields.custom_fields["tagline"] != blank %}
          <h3>{{ product.metafields.custom_fields["tagline"] }}</h3>
          {% endif %}
          <p>{{product.content}}</p>
        </div>
        {% render 'product-usp-icons' %}
        {%- unless sampleBox -%}
          <div class="product-details-actions">
            {%- if kibble -%}
              <button onclick="scrollToNextSection()" class="button button-secondary">More info</button>
            {%- endif -%}
            <button type="button" onclick="scrollToBuyForm()" name="button" class="button button-primary">Buy now</button>
          </div>
        {%- endunless -%}
        {%- if sampleBox -%}
          <script src="{{ 'product-form.js' | asset_url }}" defer="defer"></script>
          {{ 'component-product-form.css' | asset_url | stylesheet_tag }}
          {{ 'component-price.css' | asset_url | stylesheet_tag }}
          {%- render 'product-form' -%}
        {%- endif -%}
      </div>
    </div>
  </div>
</section>

<script type="text/javascript">
  function scrollToNextSection() {
    const nextSection = document.querySelector('#section-product-detail-usp');
    nextSection.scrollIntoView({behavior: "smooth"});
  }

  function scrollToBuyForm() {
    const buyForm = document.querySelector('.product-buy-section');
    buyForm.scrollIntoView({ behavior: "smooth"} )
  }
</script>

{% schema %}
{
  "name": "Product details",
  "tag": "section",
  "class": "product-details-section",
  "presets": [
    {
      "name": "Product details"
    }
  ]
}
{% endschema %}
